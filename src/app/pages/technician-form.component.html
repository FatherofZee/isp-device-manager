<div class="form-container">
  <h2 style="text-align:center; color:#ff7900;">For Internal Use Only</h2>

  <form (ngSubmit)="onSubmit()" #techForm="ngForm" *ngIf="!submitted">
    <!-- Requirement Feasible & Warranty -->
    <div class="form-group" style="display: flex; gap: 2rem;">
      <div>
        <label>Requirement Feasible:</label>
        <label><input type="checkbox" [(ngModel)]="formData.requirementFeasibleYes" name="requirementFeasibleYes" /> Yes</label>
        <label><input type="checkbox" [(ngModel)]="formData.requirementFeasibleNo" name="requirementFeasibleNo" /> No</label>
      </div>
      <div>
        <label>Device under Warranty:</label>
        <label><input type="checkbox" [(ngModel)]="formData.warrantyYes" name="warrantyYes" /> Yes</label>
        <label><input type="checkbox" [(ngModel)]="formData.warrantyNo" name="warrantyNo" /> No</label>
        <label><input type="checkbox" [(ngModel)]="formData.warrantyNA" name="warrantyNA" /> N/A</label>
      </div>
    </div>

    <!-- Orange Recipient Diagnosis -->
    <div class="form-group">
      <label>Orange Recipient Diagnosis:</label>
      <textarea [(ngModel)]="formData.recipientDiagnosis" name="recipientDiagnosis" rows="2"></textarea>
    </div>
    <div class="form-group" style="display: flex; gap: 1rem;">
      <input type="text" [(ngModel)]="formData.recipientName" name="recipientName" placeholder="Orange Recipient Name" />
      <input type="text" [(ngModel)]="formData.recipientCUID" name="recipientCUID" placeholder="Recipient CUID" />
    </div>
    <div class="form-group">
      <label>Date Received:</label>
      <input type="date" [(ngModel)]="formData.recipientDateReceived" name="recipientDateReceived" />
    </div>

    <!-- Orange Technician Diagnosis -->
    <div class="form-group">
      <label>Orange Technician Diagnosis:</label>
    </div>
    <div class="form-group" style="display: flex; gap: 1rem;">
      <input type="text" [(ngModel)]="formData.technicianName" name="technicianName" placeholder="Support Technician Name" />
      <input type="text" [(ngModel)]="formData.technicianCUID" name="technicianCUID" placeholder="Support Technician CUID" />
    </div>
    <div class="form-group">
      <label>Date Received:</label>
      <input type="date" [(ngModel)]="formData.technicianDateReceived" name="technicianDateReceived" />
    </div>

    <!-- Evaluation -->
    <div class="form-group">
      <label>Evaluation:</label>
      <textarea [(ngModel)]="formData.evaluation" name="evaluation" rows="2"></textarea>
    </div>

    <!-- Troubleshooting measures -->
    <div class="form-group">
      <label>Troubleshooting measures undertaken:</label>
      <textarea [(ngModel)]="formData.troubleshooting" name="troubleshooting" rows="2"></textarea>
    </div>

    <!-- Conclusion -->
    <div class="form-group">
      <label>Conclusion:</label>
      <textarea [(ngModel)]="formData.conclusion" name="conclusion" rows="2"></textarea>
    </div>

    <!-- Actual Duration, Completion Date, Collection Date, Customer Signature -->
    <div class="form-group" style="display: flex; gap: 1rem;">
      <input type="text" [(ngModel)]="formData.actualDuration" name="actualDuration" placeholder="Actual Duration of Troubleshooting" />
      <div>
        <label>Completion Date:</label>
        <input type="date" [(ngModel)]="formData.completionDate" name="completionDate" />
      </div>
      <div>
        <label>Date of Collection:</label>
        <input type="date" [(ngModel)]="formData.collectionDate" name="collectionDate" />
      </div>
    </div>
   
    <!--
    <div class="form-group">
      <label>Customer Signature:</label>
      <input type="file" (change)="onCustomerSignatureUpload($event)" accept="image/*" />
      <span *ngIf="customerSignature">{{ customerSignature.name }}</span>
    </div>
    -->

    <div class="form-group">
      <label>Technician Signature</label>
      <input type="file" (change)="onTechSignatureUpload($event)" accept="image/*" />
      <span *ngIf="techSignature">{{ techSignature.name }}</span>
    </div>

    <!-- Technical Lead Signature for signoff -->
    <div class="form-group">
      <label>Technical Lead Signature (Signoff)</label>
      <input type="file" (change)="onLeadSignatureUpload($event)" accept="image/*" />
      <span *ngIf="leadSignature">{{ leadSignature.name }}</span>
    </div>

    <div class="button-row">
      <button type="submit">Submit</button>
      <button type="button" (click)="exportToPdf()">Export to PDF</button>
      <button type="button" (click)="backToDashboard()">Back to Dashboard</button>
    </div>
  </form>

  <div *ngIf="submitted" class="form-group" style="color: green;">
    <strong>Form submitted successfully!</strong>
  </div>

  <!-- Contact Info -->
  <div style="margin-top:2rem; font-size:0.95rem; color:#555;">
    <strong>Contact Us</strong><br>
    Call 123 or Orange Mobile or 3656777, 72141930, 72131939 from any phone for any queries or enquiries<br>
    Email: <a href="mailto:handsetrepairs@orange.co.bw">handsetrepairs@orange.co.bw</a> or <a href="mailto:customerservice@orange.co.bw">customerservice@orange.co.bw</a><br>
    Website: <a href="http://www.orange.co.bw" target="_blank">www.orange.co.bw</a>
  </div>

  <!-- List of Technician Forms -->
  <div class="technician-forms-list" style="margin-top: 2rem;">
    <h3>Technician Forms</h3>
    <ul>
      <li *ngFor="let form of technicianForms">
        {{ form.technicianName }} - {{ form.serialNumber }}
        <button (click)="openTechnicianForm(form.id)">Open</button>
      </li>
    </ul>
  </div>
</div>

<!-- Back to Dashboard button at the bottom -->
<div style="text-align: center; margin-top: 40px;">
  <button class="back-btn" type="button" (click)="backToDashboard()">Back to Technician Dashboard</button>
</div>

